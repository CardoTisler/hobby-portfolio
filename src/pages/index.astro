---
import { getCollection } from 'astro:content';
import Layout from '@/layouts/Layout.astro';
import Hero from '@/components/Hero.astro';
import ProjectGrid from '@/components/ProjectGrid.astro';
import { sortProjectsByDate } from '@/lib/utils';

const allProjects = await getCollection('projects');
const recentProjects = sortProjectsByDate(allProjects).slice(0, 6);
---

<Layout title="Cardo Tisler | Craftsman & Builder">
  <Hero />

  <!-- Recent Work Section -->
  <section class="py-24 px-6 lg:px-8">
    <div class="max-w-7xl mx-auto">
      <!-- Section header -->
      <div class="flex flex-col sm:flex-row sm:items-end justify-between gap-6 mb-12">
        <div>
          <span class="inline-flex items-center gap-3 text-brass text-sm font-medium tracking-[0.2em] uppercase mb-4">
            <span class="w-8 h-px bg-brass"></span>
            Portfolio
          </span>
          <h2 class="font-display text-4xl sm:text-5xl text-cream">
            Recent Work
          </h2>
        </div>

        {allProjects.length > 6 && (
          <a
            href="/gallery"
            class="group inline-flex items-center gap-3 text-dust hover:text-cream transition-colors duration-300"
          >
            <span class="font-medium">View all projects</span>
            <span class="w-8 group-hover:w-12 h-px bg-stone group-hover:bg-brass transition-all duration-300"></span>
            <svg
              class="w-4 h-4 text-stone group-hover:text-brass transition-colors duration-300"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
            </svg>
          </a>
        )}
      </div>

      <ProjectGrid
        projects={recentProjects}
        emptyMessage="Projects coming soon. Check back later!"
      />
    </div>
  </section>

  <!-- About teaser section -->
  <section class="py-24 px-6 lg:px-8 bg-charcoal/30">
    <div class="max-w-7xl mx-auto">
      <div class="grid lg:grid-cols-2 gap-16 items-center">
        <div>
          <span class="inline-flex items-center gap-3 text-brass text-sm font-medium tracking-[0.2em] uppercase mb-4">
            <span class="w-8 h-px bg-brass"></span>
            About
          </span>
          <h2 class="font-display text-4xl sm:text-5xl text-cream mb-6">
            Built by hand,<br />
            <span class="text-dust">crafted with care</span>
          </h2>
          <p class="text-dust text-lg font-light leading-relaxed mb-8">
            Every project begins with an idea and ends with something tangible.
            Whether it's custom furniture, a room transformation, or a garden
            feature, I approach each build with the same dedication to quality
            and attention to detail.
          </p>
          <div class="flex flex-wrap gap-8">
            <div>
              <span class="block font-display text-4xl text-brass">{allProjects.length}+</span>
              <span class="text-ash text-sm tracking-wide uppercase">Projects</span>
            </div>
            <div>
              <span class="block font-display text-4xl text-brass">3</span>
              <span class="text-ash text-sm tracking-wide uppercase">Categories</span>
            </div>
          </div>
        </div>

        <!-- Decorative element -->
        <div class="hidden lg:block relative">
          <div class="aspect-square max-w-md ml-auto">
            <div class="absolute inset-0 border border-stone/20"></div>
            <div class="absolute inset-4 border border-brass/30"></div>
            <div class="absolute inset-8 bg-gradient-to-br from-brass/5 to-transparent"></div>
            <div class="absolute inset-0 flex items-center justify-center">
              <span class="font-display text-8xl text-stone/20">CT</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
</Layout>
