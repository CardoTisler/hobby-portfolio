---
import { getCollection } from 'astro:content';
import Layout from '@/layouts/Layout.astro';
import Hero from '@/components/Hero.astro';
import ProjectGrid from '@/components/ProjectGrid.astro';
import { sortProjectsByDate } from '@/lib/utils';

const allProjects = await getCollection('projects');
const recentProjects = sortProjectsByDate(allProjects).slice(0, 6);
---

<Layout title="Cardo Tisler | Portfolio">
  <Hero />

  <section class="py-16 px-4 sm:px-6 lg:px-8">
    <div class="max-w-7xl mx-auto">
      <h2 class="text-2xl font-bold mb-8">Recent Work</h2>
      <ProjectGrid
        projects={recentProjects}
        emptyMessage="No projects yet. Add your first project in src/content/projects/"
      />

      {allProjects.length > 6 && (
        <div class="mt-12 text-center">
          <a
            href="/gallery"
            class="inline-block px-8 py-3 bg-gold text-dark font-semibold rounded-lg hover:bg-gold/90 transition-colors"
          >
            View All Projects
          </a>
        </div>
      )}
    </div>
  </section>
</Layout>
