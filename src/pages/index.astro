---
import { getCollection } from 'astro:content';
import Layout from '@/layouts/Layout.astro';
import Hero from '@/components/Hero.astro';
import ProjectGrid from '@/components/ProjectGrid.astro';
import { sortProjectsByDate } from '@/lib/utils';

const allProjects = await getCollection('projects');
const recentProjects = sortProjectsByDate(allProjects).slice(0, 6);
---

<Layout title="Cardo Tisler">
  <Hero />

  <!-- Recent Work -->
  <section class="py-24 px-8 lg:px-12">
    <div class="max-w-6xl mx-auto">
      <!-- Section header - minimal -->
      <div class="flex items-end justify-between mb-16">
        <div class="animate-fade-up">
          <h2 class="font-display text-3xl text-charcoal">
            Recent work
          </h2>
        </div>

        {allProjects.length > 6 && (
          <a
            href="/gallery"
            class="animate-fade-up delay-100 inline-flex items-center gap-3 text-drift hover:text-ink transition-colors duration-300"
          >
            <span class="text-sm">View all</span>
            <span class="w-8 h-px bg-clay"></span>
          </a>
        )}
      </div>

      <ProjectGrid
        projects={recentProjects}
        emptyMessage="Projects coming soon."
      />
    </div>
  </section>

  <!-- Simple about section -->
  <section class="py-24 px-8 lg:px-12 border-t border-stone">
    <div class="max-w-6xl mx-auto">
      <div class="max-w-2xl">
        <p class="animate-fade-up font-display text-3xl sm:text-4xl text-charcoal leading-relaxed">
          Every project is an exercise in patience.
          In understanding the material.
          In finding beauty in simplicity.
        </p>

        <div class="animate-fade-up delay-200 mt-12 flex items-center gap-8 text-drift">
          <span>{allProjects.length} projects</span>
          <span class="w-px h-4 bg-clay"></span>
          <span>Estonia</span>
        </div>
      </div>
    </div>
  </section>
</Layout>
